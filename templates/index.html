<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Page title shown in browser tab -->
    <title>Tesla Stock Price Predictor</title>

    <!-- Linking external CSS file -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

    <!-- Basic meta for responsiveness -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>

    <!-- Main container -->
    <div class="container">

        <!-- ================= HEADER ================= -->
        <header class="header">
            <h1>Tesla Stock Price Prediction</h1>
            <p>Predict future stock prices using Deep Learning models</p>
        </header>

        <!-- ================= FORM SECTION ================= -->
        <section class="form-section">
            <h2>Prediction Settings</h2>

            <!-- Flask form (POST request) -->
            <form method="post" id="prediction-form">

                <!-- Model Selection -->
                <label for="model">Select Prediction Model</label>
                <select name="model" id="model" required>
                    <option value="rnn">Simple RNN</option>
                    <option value="lstm">LSTM</option>
                </select>

                <!-- Days Input -->
                <label for="days">Number of Future Days</label>
                <input
                    type="number"
                    name="days"
                    id="days"
                    placeholder="Example: 7, 14, 30"
                    required
                >

                <!-- Submit Button -->
                <button type="submit">Predict Stock Price</button>

                <!-- ================= LOADING SPINNER ================= -->
                <div id="loading" class="loading-box" style="display:none;">
                    <div class="loader"></div>
                    <p>Predicting stock prices...</p>
                </div>

            </form>
        </section>

        <!-- ================= ERROR MESSAGE ================= -->
        {% if error_message %}
        <section class="error-section">
            <p class="error-message">{{ error_message }}</p>
        </section>
        {% endif %}

        <!-- ================= PREDICTION RESULTS ================= -->
        {% if prediction is not none %}
        <section class="result-section">

            <h2>Prediction Results</h2>
            <p>Predicted stock prices with confidence range</p>

            <!-- Results Table -->
            <table>
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Predicted Price ($)</th>
                        <th>Lower Bound</th>
                        <th>Upper Bound</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in prediction %}
                    <tr>
                        <td>{{ row.date }}</td>
                        <td>{{ row.price }}</td>
                        <td>{{ row.low }}</td>
                        <td>{{ row.high }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

            <!-- ================= MODEL INSIGHT ================= -->
            <div class="model-info">
                <h3>Model Insight</h3>
                <p>
                    <strong>Simple RNN</strong> works well for short-term patterns but
                    struggles with long-term memory.
                </p>
                <p>
                    <strong>LSTM</strong> retains important information over longer periods,
                    making it more suitable for stock market predictions.
                </p>
            </div>

            <!-- ================= ACCURACY COMPARISON ================= -->
            <div class="accuracy-box">
                <h3>Model Accuracy Comparison</h3>

                <div class="accuracy-item">
                    <span>Simple RNN</span>
                    <div class="bar">
                        <div class="fill rnn"></div>
                    </div>
                    <span class="percent">82%</span>
                </div>

                <div class="accuracy-item">
                    <span>LSTM</span>
                    <div class="bar">
                        <div class="fill lstm"></div>
                    </div>
                    <span class="percent">90%</span>
                </div>
            </div>

            <!-- ================= PLOT ================= -->
            {% if plot_url %}
            <div class="plot-section">
                <h3>Prediction Visualization</h3>
                <img src="{{ url_for('static', filename=plot_url) }}" alt="Prediction Plot">
            </div>
            {% endif %}

        </section>
        {% endif %}

        <!-- ================= FOOTER ================= -->
        <footer class="footer">
            <p>Tesla Stock Prediction Project | RNN & LSTM</p>
        </footer>

    </div>

    <!-- ================= JAVASCRIPT ================= -->
    <script>
        const form = document.getElementById("prediction-form");
        const loading = document.getElementById("loading");

        form.addEventListener("submit", () => {
            loading.style.display = "block";
        });
    </script>

</body>
</html>
